<!DOCTYPE html>
<html class="no-js" lang="pt">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>A saga do Tablet - parte 01 - Leandro Peçanha Scardua</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		
		<meta property="og:title" content="A saga do Tablet - parte 01" />
<meta property="og:description" content="Eu tenho um Galaxy Tab antigo, versão 7. Ele já não atualiza e a versão do Android e nem me
permite instalar nada pois a maior parte dos aplicativos é construído para uma versão mais nova
do sistema operacional.
Ele estava encostado aqui e, embora na teoria eu ainda possa utilizá-lo, na prática não posso!Nem mesmo a PlayStore
eu consigo acessar!
Navegar é possível em apenas alguns poucos sites e mesmo assim sou importunado por mensagens de
alerta por problemas de certificados e ainda por sites toscamente renderizados.
Enfim, não perco nada se o danificar em uma empreitada&hellip;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://leandropecanhascardua.github.io/artigos/a-saga-do-tablet-01/" />
<meta property="article:published_time" content="2022-07-06T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-07-06T00:00:00+00:00" />

		<meta itemprop="name" content="A saga do Tablet - parte 01">
<meta itemprop="description" content="Eu tenho um Galaxy Tab antigo, versão 7. Ele já não atualiza e a versão do Android e nem me
permite instalar nada pois a maior parte dos aplicativos é construído para uma versão mais nova
do sistema operacional.
Ele estava encostado aqui e, embora na teoria eu ainda possa utilizá-lo, na prática não posso!Nem mesmo a PlayStore
eu consigo acessar!
Navegar é possível em apenas alguns poucos sites e mesmo assim sou importunado por mensagens de
alerta por problemas de certificados e ainda por sites toscamente renderizados.
Enfim, não perco nada se o danificar em uma empreitada&hellip;">
<meta itemprop="datePublished" content="2022-07-06T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2022-07-06T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="1895">



<meta itemprop="keywords" content="ubuntu,linux,Android,Tablet,Usb," />
		
		<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="A saga do Tablet - parte 01"/>
<meta name="twitter:description" content="Eu tenho um Galaxy Tab antigo, versão 7. Ele já não atualiza e a versão do Android e nem me
permite instalar nada pois a maior parte dos aplicativos é construído para uma versão mais nova
do sistema operacional.
Ele estava encostado aqui e, embora na teoria eu ainda possa utilizá-lo, na prática não posso!Nem mesmo a PlayStore
eu consigo acessar!
Navegar é possível em apenas alguns poucos sites e mesmo assim sou importunado por mensagens de
alerta por problemas de certificados e ainda por sites toscamente renderizados.
Enfim, não perco nada se o danificar em uma empreitada&hellip;"/>


	<link rel="stylesheet" href="/css/style.css">
		<link rel="stylesheet" href="/css/custom.css">

	<link rel="shortcut icon" href="https://leandropecanhascardua.github.io/favicon.ico">

	
		
	 <link rel="stylesheet" href="/post.css">
</head>
<body class="body">
	<header class="header">
	
	<div class="logo logo--mixed">
		<div class="container">
			<a class="logo__link" href="/" title="Leandro Peçanha Scardua" rel="home">
				<div class="logo__item logo__imagebox">
						<img class="logo__img" src="/img/rei-leao.png" alt="Logo image">
					</div><div class="logo__item logo__text">
						<div class="logo__title">Leandro Peçanha Scardua</div>
						<div class="logo__tagline">Tecnologia e Desenvolvimento de sistemas</div>
					</div>
			</a>
		</div>
	</div>

</header>

<nav class="menu">
	<div class="container">
		<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
			<span class="menu__btn-title" tabindex="-1">Menu</span>
		</button>
		<ul class="menu__list">
			<li class="menu__item">
				<a class="menu__link" href="/">
					
					<span class="menu__text">Home</span>
					
				</a>
			</li>
			<li class="menu__item">
				<a class="menu__link" href="/artigos/">
					
					<span class="menu__text">Artigos</span>
					
				</a>
			</li>
			<li class="menu__item">
				<a class="menu__link" href="/dicas/">
					
					<span class="menu__text">Dicas</span>
					
				</a>
			</li>
		</ul>
	</div>
</nav>



	<div class="container wrapper flex">
		<div class="primary">
		
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">A saga do Tablet - parte 01</h1>
			<div class="post__meta meta"><div class="meta__item-author meta__item">
	<svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2 0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class="meta__text">Leandro Peçanha Scardua</span>
</div>
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2022-07-06T00:00:00Z">06.07.2022</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/linux/" rel="category">Linux</a>
	</span>
</div></div>
		</header><div class="content post__content clearfix">
			<p>Eu tenho um Galaxy Tab antigo, versão 7. Ele já não atualiza e a versão do Android e nem me
permite instalar nada pois a maior parte dos aplicativos é construído para uma versão mais nova
do sistema operacional.</p>
<p>Ele estava encostado aqui e, embora na teoria eu ainda possa utilizá-lo, na prática não posso!Nem mesmo a PlayStore
eu consigo acessar!</p>
<p>Navegar é possível em apenas alguns poucos sites e mesmo assim sou importunado por mensagens de
alerta por problemas de certificados e ainda por sites toscamente renderizados.</p>
<p>Enfim, não perco nada se o danificar em uma empreitada&hellip;</p>
<p>Eu pretendo instalar algo que me permita utilizá-lo. O mínimo de que preciso é de um
navegador funcional, que me permita acessar à maioria dos sites que eu gosto.</p>
<p>Então a tarefa é instalar uma distribuição Linux nele ou instalar uma nova ROM. Minha primeira tenta-tiva
será instalar uma distribuição Linux dentro dele. Se não conseguir, parto para a ROM.</p>
<p>A primeira coisa a fazer, então, é saber o que eu tenho em mãos para minimizar os riscos que irei correr.
O modelo é GT-P1010, então vasculhando pela internet, encontrei:</p>
<table>
<thead>
<tr>
<th align="right"></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">Modelo:</td>
<td>GT-P1010 Galaxy Tab 7.0</td>
</tr>
<tr>
<td align="right">Processador:</td>
<td>S5PC110 (OMAP 3621) <strong>32 bits</strong></td>
</tr>
<tr>
<td align="right">Tipo de Core:</td>
<td>ARM Cortex-A8</td>
</tr>
<tr>
<td align="right">Instruções suportadas:</td>
<td><strong>ARM v7</strong></td>
</tr>
<tr>
<td align="right">Velocidade:</td>
<td>1 Ghz</td>
</tr>
<tr>
<td align="right">Núcleos:</td>
<td>01</td>
</tr>
<tr>
<td align="right">GPU:</td>
<td><strong>PowerVR SGX530</strong></td>
</tr>
<tr>
<td align="right">Tamanho:</td>
<td>7&rsquo;&rsquo;</td>
</tr>
<tr>
<td align="right">Resolução:</td>
<td><strong>1024 x 600 px 170 ppi</strong> (~60.2% ratio corpo-tela)</td>
</tr>
<tr>
<td align="right">Tipo de Display:</td>
<td>Color TN-TFT LCD</td>
</tr>
<tr>
<td align="right">Tela:</td>
<td>Capacitive multi-touch screen</td>
</tr>
<tr>
<td align="right">Memória interna:</td>
<td><strong>16 Gb</strong></td>
</tr>
<tr>
<td align="right">Memória RAM:</td>
<td><strong>512 Mb</strong></td>
</tr>
<tr>
<td align="right">Bateria:</td>
<td>Li-Ion 4000 mAh</td>
</tr>
<tr>
<td align="right">Cartão de memória:</td>
<td>microSD, microSDHC (até 32 Gb)</td>
</tr>
<tr>
<td align="right">Câmera:</td>
<td>3.15 MPx</td>
</tr>
<tr>
<td align="right">Bluetooth:</td>
<td>sim (A2DP| EDR)</td>
</tr>
<tr>
<td align="right">Wifi:</td>
<td>802.11b, 802.11g, 802.11n</td>
</tr>
<tr>
<td align="right">GPS:</td>
<td>sim</td>
</tr>
</tbody>
</table>
<p>O relatório acima não é muito confiável porque tirei de vários sites da Internet, mas podemos ver
que vamos precisar de uma distribuição Linux com os seguintes:
requisitos:</p>
<ul>
<li>processador ARM</li>
<li>32 bits</li>
<li>consuma menos de 256 Mb com interface gráfica</li>
</ul>
<h2 id="preparação">Preparação</h2>
<p>A primeira coisa a ser feita era conectar o tablet ao computador e de início tive meu primeiro problema:</p>
<blockquote>
<p>leandro@leandro:~$ adb devices<br>
List of devices attached<br>
????????????	no permissions</p>
</blockquote>
<p>Pela mensagem o dispositivo havia sido reconhecido, mas não havia sido encontrado. Pesquisando um
pouco pela internet, encontrei uma sugestão <a href="http://ptspts.blogspot.com/2011/10/how-to-fix-adb-no-permissions-error-on.html">aqui</a>
que funcionou perfeitamente.
A solução seria criar um arquivo <strong>51-android.rules</strong> dentro de <strong>/etc/udev/rules.d/</strong> com o seguinte conteúdo:</p>
<pre><code>SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;0bb4&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;0e79&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;0502&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;0b05&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;413c&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;0489&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;091e&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;18d1&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;0bb4&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;12d1&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;24e3&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;2116&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;0482&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;17ef&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;1004&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;22b8&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;0409&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;2080&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;0955&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;2257&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;10a9&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;1d4d&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;0471&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;04da&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;05c6&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;1f53&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;04e8&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;04dd&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;0fce&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;0930&quot;, MODE=&quot;0666&quot;
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;19d2&quot;, MODE=&quot;0666&quot;
</code></pre><p>Depois precisei desconectar o tablet e recarregar as regras do udev rodando o comando:</p>
<blockquote>
<p>sudo udevadm control -R</p>
</blockquote>
<p>E então conectar o tablet novamente. Verificando o dispositivo vemos:</p>
<blockquote>
<p>leandro@leandro:~$ adb devices<br>
List of devices attached<br>
10106419c016	device</p>
</blockquote>
<p>Contudo, fiquei curioso com a solução. Conectando o tablet e verificando pelo lsusb:</p>
<blockquote>
<p>leandro@leandro:~$ lsusb<br>
<strong>Bus 002 Device 006: ID 04e8:681c Samsung Electronics Co., Ltd Galaxy Portal/Spica/S</strong><br>
Bus 002 Device 005: ID 1a2c:2c27 China Resource Semico Co., Ltd<br>
Bus 002 Device 004: ID 1a40:0101 Terminus Technology Inc. Hub<br>
Bus 002 Device 003: ID 1ea7:0064 SHARKOON Technologies GmbH<br>
Bus 002 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub<br>
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub<br>
Bus 001 Device 003: ID 5986:053a Acer, Inc<br>
Bus 001 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub<br>
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</p>
</blockquote>
<p>A saída do tablet está destacada na listagem do usb e podemos ver que o id de fabricante e de produto
é 04e8:681c, sendo <strong>04e8</strong> o ID de fabricante e <strong>681c</strong> o ID de produto.</p>
<p>Será que encontraremos algum desses identificadores no arquivo /etc/udev/rules.d/51-android.rules?</p>
<blockquote>
<p>leandro@leandro:~$ grep 04e8  /etc/udev/rules.d/51-android.rules<br>
SUBSYSTEM==&quot;usb&rdquo;, ATTRS{idVendor}==&quot;04e8&rdquo;, MODE=&quot;0666&rdquo;<br>
leandro@leandro:~$ grep 681c  /etc/udev/rules.d/51-android.rules<br>
leandro@leandro:~$</p>
</blockquote>
<p>Podemos ver que existe uma regra associanda ao ID de fabricante (<strong>04e8</strong>).</p>
<p>Isso significa que todas as outras regras são desnecessárias e podem ser removidas sem problema! E
mais! Vamos analisar a regra e ver o que ela faz:</p>
<blockquote>
<p>SUBSYSTEM==&quot;usb&rdquo;, ATTRS{idVendor}==&quot;04e8&rdquo;, MODE=&quot;0666&rdquo;</p>
</blockquote>
<p>Primeiramente essa é uma regra do UDEV. Ele é o gerenciador dinâmico de dispositivos e
recebe eventos do kernel quando um dispositivo é adicionado,removido ou tem seu estado alterado no
sistema.</p>
<p>Esse sub sistema do kernel é gerido por meio de regras e acima adicionamos uma.</p>
<p>Cada linha em um arquivo de regras e contém várias linhas onde cada uma contém ao menos um par chave-valor
(com exceção dos comentários). Há dois tipos de chaves: correspondência(match) e atribuição(assignment).</p>
<p>Resumindo, correspondências são verificações (como se fosse um <strong>IF</strong> em uma linguagem de programação)
enquanto a atribuição é justamente isso.</p>
<p>Além disso, cada par chave-valor possui uma operação, que pode ser:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>==</strong></td>
<td>comparação de igualdade</td>
</tr>
<tr>
<td><strong>!=</strong></td>
<td>comparação por diferença</td>
</tr>
<tr>
<td><strong>=</strong></td>
<td>atribuição de valor</td>
</tr>
<tr>
<td><strong>+=</strong></td>
<td>adiciona o valor a uma chave que contém uma lista de entradas</td>
</tr>
<tr>
<td><strong>-=</strong></td>
<td>remove o valor a uma chave que contém uma lista de entradas</td>
</tr>
<tr>
<td><strong>:=</strong></td>
<td>atribui um valor a uma chave e desabilita mudanças posteriores</td>
</tr>
</tbody>
</table>
<p>Então, voltando à nossa regra, seria como se tivéssemos:</p>
<pre><code>IF SUBSYSTEM==&quot;usb&quot; AND ATTRS{idVendor}==&quot;04e8&quot; THEN 
  MODE=&quot;0666&quot;
ENDIF
</code></pre><p>Da man page do udev temos que:</p>
<ul>
<li>
<p><strong>SUBSYSTEM</strong>: Pesquise por um nome de subsistema de dispositivo correspondente. Corresponde a uma
busca por um nome de diretório dentro do sistema de arquivos /sys.</p>
</li>
<li>
<p><strong>ATTRS</strong>: Pesquise por um nome de atributo correspondente. Corresponde a uma busca por nome de
arquivo dentro do sistema de arquivos /sys e dentro de SUBSYSTEM no nosso caso.</p>
</li>
</ul>
<p>A regra acima procura por um diretório de nome usb dentro do sistema de arquivos /sys e, dentro desse
diretório, por um arquivo de nome idVendor com conteúdo 04e8. Será que ele existe?</p>
<p>O subsistema usb está definido em <strong>/sys/bus/usb</strong></p>
<blockquote>
<p>leandro@leandro:/sys/bus/usb$ ls<br>
<strong>devices</strong>  drivers  drivers_autoprobe  drivers_probe  uevent</p>
</blockquote>
<p>O que nos interessa está dentro do subdiretório <strong>devices</strong>. Dentro desse diretório temos vários
sub diretórios, correspondendo aos dispositivos usb encontrados pelo kernel e que podem ser listados
pelo comando <strong>lsusb</strong>. A opção -t do lsusb nos fornece uma saída mais fácil para localizar os
dispositivos:</p>
<blockquote>
<p>leandro@leandro:~$ lsusb -t<br>
/:  Bus 02.Port 1: Dev 1, Class=root_hub, Driver=ehci-pci/2p, 480M<br>
    |__ Port 1: Dev 2, If 0, Class=Hub, Driver=hub/4p, 480M<br>
          |__ Port 1: Dev 3, If 0, Class=Human Interface Device, Driver=usbhid, 12M<br>
          |__ Port 2: Dev 4, If 0, Class=Hub, Driver=hub/4p, 480M<br>
               |__ Port 1: Dev 5, If 1, Class=Human Interface Device, Driver=usbhid, 1.5M<br>
               |__ Port 1: Dev 5, If 0, Class=Human Interface Device, Driver=usbhid, 1.5M<br>
               |__ Port 2: Dev 6, If 0, Class=Communications, Driver=cdc_acm, 480M<br>
               |__ Port 2: Dev 6, If 1, Class=CDC Data, Driver=cdc_acm, 480M<br>
               |__ Port 2: Dev 6, If 2, Class=Mass Storage, Driver=usb-storage, 480M<br>
               |__ Port 2: Dev 6, If 3, Class=Vendor Specific Class, Driver=, 480M**<br>
/:  Bus 01.Port 1: Dev 1, Class=root_hub, Driver=ehci-pci/2p, 480M<br>
      |__ Port 1: Dev 2, If 0, Class=Hub, Driver=hub/4p, 480M<br>
           |__ Port 1: Dev 3, If 0, Class=Video, Driver=uvcvideo, 480M<br>
           |__ Port 1: Dev 3, If 1, Class=Video, Driver=uvcvideo, 480M</p>
</blockquote>
<p>Seguindo o padrão bus-port para representar uma árvore, como pode ser visto abaixo. Compare com a
saída do lsusb acima.</p>
<blockquote>
<p>leandro@leandro:/sys/bus/usb/devices$ ls -l
total 0
lrwxrwxrwx 1 root root 0 jul  5 21:04 1-0:1.0 -&gt; ../../../devices/pci0000:00/0000:00:1a.0/usb1/1-0:1.0<br>
lrwxrwxrwx 1 root root 0 jul  5 21:04 1-1 -&gt; ../../../devices/pci0000:00/0000:00:1a.0/usb1/1-1<br>
lrwxrwxrwx 1 root root 0 jul  5 21:04 1-1.1 -&gt; ../../../devices/pci0000:00/0000:00:1a.0/usb1/1-1/1-1.1<br>
lrwxrwxrwx 1 root root 0 jul  5 21:04 1-1:1.0 -&gt; ../../../devices/pci0000:00/0000:00:1a.0/usb1/1-1/1-1:1.0<br>
lrwxrwxrwx 1 root root 0 jul  5 21:04 1-1.1:1.0 -&gt; ../../../devices/pci0000:00/0000:00:1a.0/usb1/1-1/1-1.1/1-1.1:1.0<br>
lrwxrwxrwx 1 root root 0 jul  5 21:04 1-1.1:1.1 -&gt; ../../../devices/pci0000:00/0000:00:1a.0/usb1/1-1/1-1.1/1-1.1:1.1<br>
lrwxrwxrwx 1 root root 0 jul  5 21:04 2-0:1.0 -&gt; ../../../devices/pci0000:00/0000:00:1d.0/usb2/2-0:1.0<br>
lrwxrwxrwx 1 root root 0 jul  5 21:04 2-1 -&gt; ../../../devices/pci0000:00/0000:00:1d.0/usb2/2-1<br>
lrwxrwxrwx 1 root root 0 jul  5 21:04 2-1.1 -&gt; ../../../devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.1<br>
lrwxrwxrwx 1 root root 0 jul  5 21:04 2-1:1.0 -&gt; ../../../devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1:1.0<br>
lrwxrwxrwx 1 root root 0 jul  5 21:04 2-1.1:1.0 -&gt; ../../../devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.1/2-1.1:1.0<br>
lrwxrwxrwx 1 root root 0 jul  5 21:04 2-1.2 -&gt; ../../../devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.2<br>
lrwxrwxrwx 1 root root 0 jul  5 21:04 2-1.2.1 -&gt; ../../../devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.2/2-1.2.1<br>
lrwxrwxrwx 1 root root 0 jul  5 21:04 2-1.2:1.0 -&gt; ../../../devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.2/2-1.2:1.0<br>
lrwxrwxrwx 1 root root 0 jul  5 21:04 2-1.2.1:1.0 -&gt; ../../../devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.2/2-1.2.1/2-1.2.1:1.0<br>
lrwxrwxrwx 1 root root 0 jul  5 21:04 2-1.2.1:1.1 -&gt; ../../../devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.2/2-1.2.1/2-1.2.1:1.1<br>
lrwxrwxrwx 1 root root 0 jul  5 21:34 2-1.2.2 -&gt; ../../../devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.2/2-1.2.2<br>
lrwxrwxrwx 1 root root 0 jul  5 21:34 2-1.2.2:3.0 -&gt; ../../../devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.2/2-1.2.2/2-1.2.2:3.0<br>
lrwxrwxrwx 1 root root 0 jul  5 21:34 2-1.2.2:3.1 -&gt; ../../../devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.2/2-1.2.2/2-1.2.2:3.1<br>
lrwxrwxrwx 1 root root 0 jul  5 21:34 2-1.2.2:3.2 -&gt; ../../../devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.2/2-1.2.2/2-1.2.2:3.2<br>
lrwxrwxrwx 1 root root 0 jul  5 21:34 2-1.2.2:3.3 -&gt; ../../../devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.2/2-1.2.2/2-1.2.2:3.3<br>
lrwxrwxrwx 1 root root 0 jul  5 21:04 usb1 -&gt; ../../../devices/pci0000:00/0000:00:1a.0/usb1<br>
lrwxrwxrwx 1 root root 0 jul  5 21:04 usb2 -&gt; ../../../devices/pci0000:00/0000:00:1d.0/usb2</p>
</blockquote>
<p>Meu tablet está está em <strong>Bus 002 Device 006</strong>(primeiro lsusb rodado no início). Localizando na estrutura
em árvore do lsusb anterior, o endereçamento fica: 2-1.2.2. Entrando, então, no subdiretório (/sys/bus/usb/devices/2-1.2.2
) podemos ver um arquivo de nome idVendor dentro dele.</p>
<blockquote>
<p>leandro@leandro:/sys/bus/usb/devices/2-1.2.2$ ls<br>
2-1.2.2:3.0  avoid_reset_quirk    bDeviceSubClass     bNumInterfaces  devnum     <strong>idVendor</strong>      power      rx_lanes   uevent<br>
2-1.2.2:3.1  bcdDevice            bmAttributes        busnum          devpath    ltm_capable   product    serial     urbnum<br>
2-1.2.2:3.2  bConfigurationValue  bMaxPacketSize0     configuration   driver     manufacturer  quirks     speed      version<br>
2-1.2.2:3.3  bDeviceClass         bMaxPower           descriptors     ep_00      maxchild      removable  subsystem<br>
authorized   bDeviceProtocol      bNumConfigurations  dev             idProduct  port          remove     tx_lanes</p>
</blockquote>
<p>Qual será o conteúdo de idVendor?</p>
<blockquote>
<p>leandro@leandro:/sys/bus/usb/devices/2-1.2.2$ cat idVendor<br>
<strong>04e8</strong></p>
</blockquote>
<p>Bingo! Será que tem um jeito mais fácil de descobrir como esse dispositivo é montado? Como criaríamos
uma regra para ele se fosse necessário?</p>
<p>O UDEV tem uma ferramenta para gerenciamento chamada <strong>udevadm</strong> que nos permite monitorar os eventos
tanto do KERNEL quanto do próprio UDEV.</p>
<p>Portanto, vou desconectar o tablet. Iniciar o udevadm e conectar o tablet novamente:</p>
<blockquote>
<p>leandro@leandro:~$ <strong>udevadm monitor -p -u</strong><br>
monitor will print the received events for:<br>
UDEV - the event which udev sends out after rule processing<br>
...<br>
UDEV  [2684.320986] add      /devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.2/2-1.2.2 (usb)<br>
ACTION=add<br>
<strong>DEVPATH=/devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.2/2-1.2.2</strong><br>
<strong>SUBSYSTEM=usb</strong><br>
<strong>DEVNAME=/dev/bus/usb/002/008</strong><br>
DEVTYPE=usb_device<br>
PRODUCT=4e8/681c/400<br>
TYPE=2/0/0<br>
BUSNUM=002<br>
DEVNUM=008<br>
SEQNUM=3672<br>
USEC_INITIALIZED=2684320510<br>
ID_VENDOR=SAMSUNG<br>
ID_VENDOR_ENC=SAMSUNG<br>
<strong>ID_VENDOR_ID=04e8</strong><br>
ID_MODEL=SAMSUNG_Android<br>
ID_MODEL_ENC=SAMSUNG_Android<br>
ID_MODEL_ID=681c<br>
ID_REVISION=0400<br>
ID_SERIAL=SAMSUNG_SAMSUNG_Android_10106419c016<br>
ID_SERIAL_SHORT=10106419c016<br>
ID_BUS=usb<br>
ID_USB_INTERFACES=:020201:0a0000:080650:ff4201:<br>
ID_VENDOR_FROM_DATABASE=Samsung Electronics Co., Ltd<br>
ID_MODEL_FROM_DATABASE=Galaxy Portal/Spica/S<br>
ID_PATH=pci-0000:00:1d.0-usb-0:1.2.2<br>
ID_PATH_TAG=pci-0000_00_1d_0-usb-0_1_2_2<br>
<strong>DRIVER=usb</strong><br>
<strong>MAJOR=189</strong><br>
<strong>MINOR=135</strong><br>
&hellip;</p>
</blockquote>
<p>A saída é extensa e eu fiz apenas um recorte para o que nos interessa. Acima temos a execução de uma
regra de adição(add), ou seja, o dispositivo está sendo adicionado ao sistema e uma série de
informações.</p>
<p>O que nos interessa é</p>
<blockquote>
<p>DEVPATH=/devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.2/2-1.2.2</p>
</blockquote>
<blockquote>
<p>DEVNAME=/dev/bus/usb/002/008</p>
</blockquote>
<p>A primeira variável informa onde está o arquivo idVendor que contém o valor do id do fabricante
enquanto a segunda variável informa onde o dispositivo está sendo criado no sistema de arquivos /dev</p>
<p>De fato, procurando as permissões do arquivo de dispositivos, temos:</p>
<blockquote>
<p>leandro@leandro:~$ ls -l /dev/bus/usb/002/008<br>
crw-rw-rw- 1 root root 189, 135 jul  5 21:49 /dev/bus/usb/002/008</p>
</blockquote>
<p>Ou seja <strong>0666 (MODE=&quot;0666&rdquo;)</strong>.Ufa!</p>
<p>Todo esse rodeio para explicar que a regra muda a permissão do arquivo no diretório /dev correspondendo
ao dispositivo adicionado à entrada usb para 666 (leitura e escrita para o usuário, para o grupo e para todos).</p>
<p>Como eu pretendo trabalhar nesse tablet com calma, vou deixar para analisar as distribuições candidatas
para instalação na parte 02 desta série de artigos (que aliás eu nem sei se conseguirei realmente instalar algo nele, mas já sei que tem de rodar um processador ARM v7
de 32 bits!). Foi um bom começo ein!</p>
<p>Fonte:<br>
<strong><a href="http://ptspts.blogspot.com/2011/10/how-to-fix-adb-no-permissions-error-on.html">http://ptspts.blogspot.com/2011/10/how-to-fix-adb-no-permissions-error-on.html</a></strong><br>
<strong>man udev</strong><br>
<strong>man udevadm</strong></p>
		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/ubuntu/" rel="tag">ubuntu</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/linux/" rel="tag">linux</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/android/" rel="tag">Android</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/tablet/" rel="tag">Tablet</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/usb/" rel="tag">Usb</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>

<div class="authorbox clearfix">
	<figure class="authorbox__avatar">
		<img alt="Leandro Peçanha Scardua avatar" src="/img/avatar.png" class="avatar" height="90" width="90">
	</figure>
	<div class="authorbox__header">
		<span class="authorbox__name">Sobre Leandro Peçanha Scardua</span>
	</div>
	<div class="authorbox__description">
		Desenvolvedor e entusiasta de Software Livre
	</div>
</div>

<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/artigos/debug_phpdgb-parte02/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Anterior</span>
			<p class="pager__title">Debugando aplicações PHP usando phpdbg - parte 02</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/artigos/a-saga-do-tablet-02/" rel="next">
			<span class="pager__subtitle">Próximo&thinsp;»</span>
			<p class="pager__title">A saga do Tablet - parte 02</p>
		</a>
	</div>
</nav>



		</div>
		
	</div>
	<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2022 Leandro Peçanha Scardua.
			<span class="footer__copyright-credits">Gerado com <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> com o tema <a href="https://github.com/pfadfinder-konstanz/hugo-dpsg/" rel="nofollow noopener" target="_blank">DPSG</a>.</span>
			
		</div>
		

	</div>
</footer>

	<script async defer src="/js/menu.js"></script>
	<script src="/js/custom.js"></script>
	
	
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2217338589613653"
     crossorigin="anonymous"></script>
</body>
</html>
