<!DOCTYPE html>
<html class="no-js" lang="pt">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Adicionando legendas em vídeo de forma automatica por reconhecimento automático de fala - Leandro Peçanha Scardua</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		
		<meta property="og:title" content="Adicionando legendas em vídeo de forma automatica por reconhecimento automático de fala" />
<meta property="og:description" content="Que tal adicionar legenda naquele filme que você baixou rodando apenas uma linha de comando?
Usando reconhecimento automático de fala em áudio isso é possível! E muito mais!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://leandropecanhascardua.github.io/dicas/legenda-automatica-linha-de-comando/" />
<meta property="article:published_time" content="2023-09-07T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-09-07T00:00:00+00:00" />

		<meta itemprop="name" content="Adicionando legendas em vídeo de forma automatica por reconhecimento automático de fala">
<meta itemprop="description" content="Que tal adicionar legenda naquele filme que você baixou rodando apenas uma linha de comando?
Usando reconhecimento automático de fala em áudio isso é possível! E muito mais!">
<meta itemprop="datePublished" content="2023-09-07T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2023-09-07T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="1024">



<meta itemprop="keywords" content="ubuntu,linux," />
		
		<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Adicionando legendas em vídeo de forma automatica por reconhecimento automático de fala"/>
<meta name="twitter:description" content="Que tal adicionar legenda naquele filme que você baixou rodando apenas uma linha de comando?
Usando reconhecimento automático de fala em áudio isso é possível! E muito mais!"/>


	<link rel="stylesheet" href="/css/style.css">
		<link rel="stylesheet" href="/css/custom.css">

	<link rel="shortcut icon" href="https://leandropecanhascardua.github.io/favicon.ico">

	
		
	 <link rel="stylesheet" href="/post.css">
</head>
<body class="body">
	<header class="header">
	
	<div class="logo logo--mixed">
		<div class="container">
			<a class="logo__link" href="/" title="Leandro Peçanha Scardua" rel="home">
				<div class="logo__item logo__imagebox">
						<img class="logo__img" src="/img/rei-leao.png" alt="Logo image">
					</div><div class="logo__item logo__text">
						<div class="logo__title">Leandro Peçanha Scardua</div>
						<div class="logo__tagline">Tecnologia e Desenvolvimento de sistemas</div>
					</div>
			</a>
		</div>
	</div>

</header>

<nav class="menu">
	<div class="container">
		<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
			<span class="menu__btn-title" tabindex="-1">Menu</span>
		</button>
		<ul class="menu__list">
			<li class="menu__item">
				<a class="menu__link" href="/">
					
					<span class="menu__text">Home</span>
					
				</a>
			</li>
			<li class="menu__item">
				<a class="menu__link" href="/artigos/">
					
					<span class="menu__text">Artigos</span>
					
				</a>
			</li>
			<li class="menu__item">
				<a class="menu__link" href="/dicas/">
					
					<span class="menu__text">Dicas</span>
					
				</a>
			</li>
		</ul>
	</div>
</nav>



	<div class="container wrapper flex">
		<div class="primary">
		
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Adicionando legendas em vídeo de forma automatica por reconhecimento automático de fala</h1>
			<div class="post__meta meta"><div class="meta__item-author meta__item">
	<svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2 0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class="meta__text">Leandro Peçanha Scardua</span>
</div>
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2023-09-07T00:00:00Z">07.09.2023</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/linux/" rel="category">Linux</a>, <a class="meta__link" href="/categories/dicas/" rel="category">Dicas</a>
	</span>
</div></div>
		</header><div class="content post__content clearfix">
			<p>Que tal adicionar legenda naquele filme que você baixou rodando apenas uma linha de comando?</p>
<p>Usando reconhecimento automático de fala em áudio isso é possível! E muito mais!</p>
<p>Vosko é um toolkit reconhecimento de fala que fornece um aplicativo de linha de comando para transcrição automática de áudio.
Ele tem a vantagem de trabalhar offline e não necessita de uma chave de registro em API proprietária tal como Google, IBM, Bing etc.</p>
<p>Tem suporte a mais de 20 idiomas, como inglês, espanhol, português, francês entre outros e também fornece módulos para desenvolvimento, permitindo ao desenvolvedor criar seu próprio código caso queira. Contudo, este artigo se refere à ferramenta de linha de comando
que vem junto com a instalação, o <strong>vosk-transcriber</strong>.</p>
<p>Devemos ter em conta sempre que a trascrição não será perfeita e que ajustes sempre serão necessários. Às vezes mais, às vezes menos. Se a transcrição que você deseja fizer parte de um trabalho importante,
sempre revise o resultado!</p>
<p>Devemos também ter em mente que a transcrição de conteúdo que tenha mais de um idioma sendo falado, como é comum no ramo da informática não será bom. Mais uma razão para uma revisão posterior!</p>
<p>A instalação é simples. É necessário ter Python versão 3 instalado- o que já é pré-requisitos nos sistemas Linux atuais&ndash; além do pip. Então:</p>
<blockquote>
<p>leandro@Mint-Sala:~$<strong>pip3 install vosk</strong></p>
</blockquote>
<p>e pronto!A mágica já está feita! Este comando vai instalar o vosk-transcriber, que já pode ser chamado pela linha de comando:</p>
<blockquote>
<p>leandro@Mint-Sala:~$ <strong>vosk-transcriber -h</strong><br>
usage: vosk-transcriber [-h] [&ndash;model MODEL] [&ndash;server] [&ndash;list-models] [&ndash;list-languages] [&ndash;model-name MODEL_NAME] [&ndash;lang LANG] [&ndash;input INPUT] [&ndash;output OUTPUT]
[&ndash;output-type OUTPUT_TYPE] [&ndash;tasks TASKS] [&ndash;log-level LOG_LEVEL]</p>
<p><strong>Transcribe audio file and save result in selected format</strong></p>
<p>optional arguments:<br>
-h, &ndash;help            show this help message and exit<br>
&ndash;model MODEL, -m MODEL<br>
model path<br>
&ndash;server, -s          use server for recognition<br>
&ndash;list-models         list available models<br>
&ndash;list-languages      list available languages<br>
&ndash;model-name MODEL_NAME, -n MODEL_NAME: select model by name<br>
&ndash;lang LANG, -l LANG : select model by language<br>
&ndash;input INPUT, -i INPUT : audiofile<br>
&ndash;output OUTPUT, -o OUTPUT : optional output filename path<br>
&ndash;output-type OUTPUT_TYPE, -t OUTPUT_TYPE : optional arg output data type<br>
&ndash;tasks TASKS, -ts TASKS :number of parallel recognition tasks<br>
&ndash;log-level LOG_LEVEL : logging level</p>
</blockquote>
<p>Se desejar consultar o site do projeto, basta acessar o site <strong><a href="https://alphacephei.com/vosk/">https://alphacephei.com/vosk/</a></strong>
um guia rápido das opções do comando:</p>
<p>-i =&gt; arquivo de entrada, arquivo com o áudio a ser processado<br>
-o =&gt; arquivo de saída em formato texto<br>
-t =&gt;  tipo de saída (podemos informar que queremos um formato de legenda)<br>
&ndash;list-languages =&gt; listar os idiomas disponíveis para transcrição<br>
&ndash;list-models =&gt; listar os modelos treinados disponíveis. Um modelo com mais dados pode fornecer uma transcrição mais precisa<br>
-n =&gt; seleciona o modelo<br>
-l =&gt; linguagem do áudio</p>
<p>Estes são os comandos mais básicos. Rodando com a opção -h como fizemos no exemplo acima fornece as opções completas.</p>
<p>Agora  alguns exemplos práticos.</p>
<p>Vamos supor que temos um arquivo que desejamos transcrever, mas que não queremos fazer isso manualmente, isto é, ouvindo e escrevendo, ou pelo menos desejamos diminuir ao máximo nosso trabalho.
É sempre importante sabermos de antemão o idioma falado no áudio que desejamos transcrever.</p>
<p>Como exemplo, baixei em meu hd o conteúdo do vídeo disponível em <a href="https://www.youtube.com/watch?v=-bX4pf-s8-E">https://www.youtube.com/watch?v=-bX4pf-s8-E</a>.</p>
<p>Já sei que o vídeo está no idioma português. Saber o idioma é fundamental para um uso eficaz e produtivo da ferramenta como falei no início.</p>
<p>Assim, eu tenho o arquivo <strong>Como-fazer-a-sua-prpria-distro-Linux-do-zero-Linux-From-Scratch-YouTube.mp4</strong> e desejo obter uma transcrição dele. Se eu rodar:</p>
<blockquote>
<p>leandro@Mint-Sala:~$ <strong>vosk-transcriber -i &lsquo;Como-fazer-a-sua-prpria-distro-Linux-do-zero-Linux-From-Scratch-YouTube.mp4&rsquo;</strong></p>
</blockquote>
<p>Imediatamente o Vosk-transcriber começa a fazer seu trabalho. Porém, o resultado do processamento é exibido na tela (em vez de ser salvo em arquivo).
Outro problema é que é usado o idioma inglês (por padrão), o que resultará em um grande erro.</p>
<p>Portanto, nossa primeira intervenção será para salvarmos o resultado em um arquivo (digamos, com o nome <strong>Como-fazer-a-sua-prpria-distro-Linux-do-zero-Linux-From-Scratch-YouTube.txt</strong>).</p>
<p>Assim, podemo executar:</p>
<blockquote>
<p>leandro@Mint-Sala:~$ <strong>vosk-transcriber -i &lsquo;Como-fazer-a-sua-prpria-distro-Linux-do-zero-Linux-From-Scratch-YouTube.mp4&rsquo; -o &lsquo;Como-fazer-a-sua-prpria-distro-Linux-do-zero-Linux-From-Scratch-YouTube.txt&rsquo;</strong></p>
</blockquote>
<p>Mas isso ainda vai usar o inglês por padrão. Portanto,vamos usar o idioma português para fazer o reconhecimento do áudio usando opção -l:</p>
<blockquote>
<p>leandro@Mint-Sala:~$ <strong>vosk-transcriber -l pt  -i &lsquo;Como-fazer-a-sua-prpria-distro-Linux-do-zero-Linux-From-Scratch-YouTube.mp4&rsquo; -o &lsquo;Como-fazer-a-sua-prpria-distro-Linux-do-zero-Linux-From-Scratch-YouTube.txt&rsquo;</strong></p>
</blockquote>
<p>Agora podemos ver que o resultado começa a se tornar interessante!</p>
<p>Agora entra em cena a questão dos modelos. Com eles é possível melhorar ainda mais a precisão do reconhecimento selecionando modelos com mais dados (maiores).
Mas tenha em mente que isso terá um custo! O modelo será baixado pela internet e, se for maior, maior carga de processamento será utilizada, representando mais tempo de transcrição!</p>
<p>Modelos são os conjuntos usados para fazer o treinamento dentro do algoritmo.
Por exemplo, o modelo <strong>vosk-model-small-pt-0.3</strong> tem 31Mb enquanto o modelo <strong>vosk-model-pt-fb-v0.1.1-20220516_2113</strong> tem 1.6 Gb!
A lista dos modelos disponíveis pode ser obtida com:</p>
<blockquote>
<p>leandro@Mint-Sala:~/Leandro/linux/python/transcricao$ <strong>vosk-transcriber &ndash;list-models</strong></p>
</blockquote>
<p>a lista de idiomas suportados pode ser obtida com:</p>
<blockquote>
<p>leandro@Mint-Sala:~$ <strong>vosk-transcriber &ndash;list-languages</strong></p>
</blockquote>
<p>para facilitar nossa vida podemos filtrar os modelos disponíveis para um idioma usando o grep. Por exemplo, para o idioma português:</p>
<blockquote>
<p>leandro@Mint-Sala:~$ <strong>vosk-transcriber &ndash;list-models| grep pt</strong>
vosk-model-pt-fb-v0.1.1-20220516_2113
vosk-model-pt-fb-v0.1.1-pruned
vosk-model-small-pt-0.3</p>
</blockquote>
<p>Uma descrição online (assim como o tamanho de cada modelo) pode ser consultada em <strong><a href="https://alphacephei.com/vosk/models">https://alphacephei.com/vosk/models</a></strong>. Mas é bom ter em mente que essa página não é muito atualizada, tendo em vista que alguns modelos não estão
listadas lá!</p>
<p>Assim, se quisermos fazer nossa transcrição usando o modelo vosk-model-pt-fb-v0.1.1-20220516_2113 (que tem 1.6Gb!), podemos rodar:</p>
<blockquote>
<p>leandro@Mint-Sala:~$ <strong>vosk-transcriber -l pt  -i &lsquo;Como-fazer-a-sua-prpria-distro-Linux-do-zero-Linux-From-Scratch-YouTube.mp4&rsquo; -o &lsquo;Como-fazer-a-sua-prpria-distro-Linux-do-zero-Linux-From-Scratch-YouTube.txt&rsquo; -n vosk-model-pt-fb-v0.1.1-20220516_2113</strong></p>
</blockquote>
<p>Se você rodou os exemplos acima percebeu que o resultado é apenas um arquivo de texto plano com o resultado das frases ditas no vídeo.</p>
<p>Falta cumprir nossa promessa de obter um arquivo de legendas. Para isso podemos passar o parâmetro -t:</p>
<blockquote>
<p>leandro@Mint-Sala:~$ <strong>vosk-transcriber -l pt -t srt  -i &lsquo;Como-fazer-a-sua-prpria-distro-Linux-do-zero-Linux-From-Scratch-YouTube.mp4&rsquo; -o &lsquo;Como-fazer-a-sua-prpria-distro-Linux-do-zero-Linux-From-Scratch-YouTube.srt&rsquo;</strong></p>
</blockquote>
<p>Feito isso podemos abrir nosso programa de vídeo favorito e carregar nossa legenda recém criada! Podemos legendar nosso filme favorito com apenas um comando!!!!! Eita Linux danado!!!!</p>
<h2 id="conclusão">Conclusão</h2>
<p>Faz tempo que eu queria uma ferramenta para fazer transcrição automática de áudio. Eu cheguei mesmo a desenvolver alguns aplicativos em Python usando a biblioteca <strong>SpeechRecognizer</strong>,
mas o resultado foi deplorável e deixou muito a desejar.</p>
<p>Usando <strong>vosk-transcriber</strong> eu consegui meu intento de forma fácil, pela linha de comando e que me permite desenvolver minha própria aplicação se eu assim desejar.</p>
		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/ubuntu/" rel="tag">ubuntu</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/linux/" rel="tag">linux</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>

<div class="authorbox clearfix">
	<figure class="authorbox__avatar">
		<img alt="Leandro Peçanha Scardua avatar" src="/img/avatar.png" class="avatar" height="90" width="90">
	</figure>
	<div class="authorbox__header">
		<span class="authorbox__name">Sobre Leandro Peçanha Scardua</span>
	</div>
	<div class="authorbox__description">
		Desenvolvedor e entusiasta de Software Livre
	</div>
</div>

<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/dicas/streaming-vlc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Anterior</span>
			<p class="pager__title">Trasmitindo vídeos do computador e assistindo no celular dentro da Intranet usando VLC (e Linux!)</p>
		</a>
	</div>
</nav>



		</div>
		
	</div>
	<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 Leandro Peçanha Scardua.
			<span class="footer__copyright-credits">Gerado com <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> com o tema <a href="https://github.com/pfadfinder-konstanz/hugo-dpsg/" rel="nofollow noopener" target="_blank">DPSG</a>.</span>
			
		</div>
		

	</div>
</footer>

	<script async defer src="/js/menu.js"></script>
	<script src="/js/custom.js"></script>
	
	
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2217338589613653"
     crossorigin="anonymous"></script>
</body>
</html>
